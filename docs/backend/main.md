# –û–ø–∏—Å–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ ‚Äî `main.py` –∏ `models.py`

## üß© main.py ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–§–∞–π–ª `main.py` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ **–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å–∫ API** –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ AI Tourist Assistant.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.  
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç CORS-middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `localhost:5173`).  
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ –æ—Ç–∑—ã–≤–æ–≤.  
- –û—Ç–¥–∞—ë—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.  

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∏ –ø—É—Ç—å –∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É (`FRONTEND_DIR`).
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –ø–∞–ø–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –∏–Ω–∞—á–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é `dotenv`.

2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```python
   app = FastAPI(title="AI Tourist Assistant", version="0.2.0")

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è CORS, —á—Ç–æ–±—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–≥ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API.

3. **–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

   | –ú–µ—Ç–æ–¥                 | –ü—É—Ç—å                                                                                                                                       | –û–ø–∏—Å–∞–Ω–∏–µ |
   | --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | -------- |
   | `GET /health`         | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è API. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status": "ok"}`.                                                                                     |          |
   | `GET /`               | –û—Ç–¥–∞—ë—Ç —Ñ–∞–π–ª `index.html` –∏–∑ –ø–∞–ø–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.                                                                                               |          |
   | `POST /api/itinerary` | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏, –≤—Ä–µ–º–µ–Ω–µ–º –∏ –ª–æ–∫–∞—Ü–∏–µ–π, –≤—ã–∑—ã–≤–∞–µ—Ç `ItineraryPlanner`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç (`ItineraryResponse`). |          |
   | `POST /api/feedback`  | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç–∑—ã–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`FeedbackRequest`), –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –µ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ —Ñ–æ–Ω–µ.                                                        |          |

4. **–†–∞–±–æ—Ç–∞ —Å –º–∞—Ä—à—Ä—É—Ç–æ–º:**

   * –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ `/api/itinerary` —Å–æ–∑–¥–∞—ë—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä `ItineraryPlanner`.
   * –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ `plan()`, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.
   * –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ `ItineraryResponse`.

---

## üìò models.py ‚Äî –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–º–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

–§–∞–π–ª `models.py` —Å–æ–¥–µ—Ä–∂–∏—Ç **–≤—Å–µ Pydantic-–º–æ–¥–µ–ª–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:

#### **ItineraryRequest**

–í—Ö–æ–¥–Ω–∞—è –º–æ–¥–µ–ª—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞.

```python
class ItineraryRequest(BaseModel):
    interests: List[str]
    available_hours: float
    location: str
```

* `interests` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
* `available_hours` ‚Äî —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ —É –Ω–µ–≥–æ –µ—Å—Ç—å.
* `location` ‚Äî —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞—Ü–∏—è (–≥–æ—Ä–æ–¥, –∞–¥—Ä–µ—Å).
* –°–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—ã –Ω–µ –ø—É—Å—Ç—ã–µ.

---

#### **ItineraryStop**

–û–ø–∏—Å—ã–≤–∞–µ—Ç –æ–¥–Ω—É –æ—Å—Ç–∞–Ω–æ–≤–∫—É –º–∞—Ä—à—Ä—É—Ç–∞.

```python
class ItineraryStop(BaseModel):
    name: str
    address: str
    reason: str
    arrival_time: str
    stay_duration_minutes: int
    latitude: float
    longitude: float
```

---

#### **ItineraryResponse**

–†–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞.

```python
class ItineraryResponse(BaseModel):
    summary: str
    total_duration_minutes: int
    stops: List[ItineraryStop]
    notes: Optional[List[str]]
```

---

#### **Place**

–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

```python
@dataclass(slots=True)
class Place:
    id: int
    title: str
    description: str
    address: str
    latitude: float
    longitude: float
    category_id: int | None
    tags: List[str]
    estimated_visit_minutes: int
    source_url: Optional[str]
```

* –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ–± –æ–¥–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º—É–∑–µ–µ, —Ç–µ–∞—Ç—Ä–µ).
* –ú–µ—Ç–æ–¥ `to_stop()` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ–±—ä–µ–∫—Ç –≤ `ItineraryStop` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –º–∞—Ä—à—Ä—É—Ç.

---

#### **FeedbackRequest**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏—ë–º–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ –º–∞—Ä—à—Ä—É—Ç–µ.

```python
class FeedbackRequest(BaseModel):
    rating: int
    comment: Optional[str]
    interests: List[str]
    location: str
    available_hours: float
    stops: List[FeedbackStop]
```

---

## üí° –ò—Ç–æ–≥

* `main.py` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç API, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.
* `models.py` ‚Äî –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–µ API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–æ–π.

